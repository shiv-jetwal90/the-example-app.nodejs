language: node_js

branches:
  only:
    - master

integrations:
  hub:
    - integrationName: drship_dockerhub     # integration name from step 1a
      type: dockerRegistryLogin

env:
  global:
    - DOCKER_REPO="the-example-app.nodejs"
    - DOCKER_ACC=shiv100 # replace with your Docker Hub account name    

build:
  ci:
    - shipctl retry "npm install"
  post_ci:
    - docker build -t $DOCKER_ACC/$DOCKER_REPO:$BRANCH.$BUILD_NUMBER .
    - docker push $DOCKER_ACC/$DOCKER_REPO:$BRANCH.$BUILD_NUMBER
